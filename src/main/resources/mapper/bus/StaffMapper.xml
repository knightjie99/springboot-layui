<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.wujie.springbootlayui.bus.mapper.StaffMapper">    <resultMap type="com.wujie.springbootlayui.bus.entity.Staff" id="staffMap" autoMapping="true">        <result property="id" column="id" jdbcType="INTEGER"/>    </resultMap>    <sql id="baseSql">        id , staff_name ,dept_id    </sql>    <sql id="allSql">        id , staff_name ,dept_id, phone, sex, id_num, card_num, staff_photo, status, create_time, update_time ,staff_num,entry_date,email,staff_job,recog_status,belong_id,remark,available,prompt    </sql>    <select id="getStaffsByDeptId" resultMap="staffMap">        select        <include refid="baseSql"></include>        from face_server.bus_staff        where dept_id = #{deptId} and available =1    </select>    <select id="getStaffById" resultMap="staffMap">        select        <include refid="allSql"></include>        from face_server.bus_staff        where id = #{id} and available =1    </select>    <select id="getStaffsByIds" resultMap="staffMap">        select        <include refid="allSql"></include>        from face_server.bus_staff        where id  in        <foreach item="item" index="index" collection="ids" open="(" separator="," close=")">            #{item}        </foreach>  and available =1    </select>    <select id="getStaffsByBelongId" resultMap="staffMap">        select        <include refid="allSql"></include>        from face_server.bus_staff        where belong_id = #{belongId} and status = 1        and available=1    </select>    <select id="getStaffNameListByIds" resultType="string">        select  GROUP_CONCAT(staff_name) as staffNames        from face_server.bus_staff        where id in        <foreach item="item" index="index" collection="ids" open="(" separator="," close=")">            #{item}        </foreach>    </select>    <select id="getGateUnscheduled" resultMap="staffMap">        select        <include refid="baseSql"></include>        from bus_staff s        where (1>(select COUNT(id) from bus_gate_author a  where  find_in_set(s.id,a.staff_list)))        and s.belong_id=#{belongId} and s.available=1    </select>    <select id="getAttendUnscheduled" resultMap="staffMap">        select        <include refid="baseSql"></include>        from bus_staff s        where (1>(select COUNT(id) from bus_attend_staff a  where  find_in_set(s.id,a.staff_list)))        and s.belong_id=#{belongId} and s.available=1    </select>    <delete id="deleteStaffByUid">        delete from bus_staff where belong_id = #{belongId}    </delete></mapper>