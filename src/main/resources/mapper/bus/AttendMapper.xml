<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.wujie.springbootlayui.bus.mapper.AttendMapper">    <resultMap type="com.wujie.springbootlayui.bus.entity.Attend"               id="attendMap" autoMapping="true">        <result property="id" column="id" jdbcType="INTEGER" />    </resultMap>    <update id="createAttendTable" parameterType="string">		CREATE TABLE		${tName} (		`id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT		'考勤管理表',		`staff_id` int(11) DEFAULT NULL COMMENT '员工ID',		`staff_name`		varchar(20) DEFAULT NULL COMMENT '员工名称',		`dept_id` int(11) DEFAULT NULL		COMMENT '部门ID',		`attend_date` datetime DEFAULT NULL COMMENT '考勤日期(天)',		`on_status` int(2) DEFAULT NULL COMMENT '上班考勤状态',		`off_status` int(2)		DEFAULT NULL COMMENT '下班考勤状态',		`attend_hour` double(3,1) DEFAULT NULL		COMMENT '当天工时',		`on_time` datetime DEFAULT NULL COMMENT '签到时间',		`on_gate` int(11) DEFAULT NULL COMMENT '签到闸机ID',		`on_photo` varchar(50)		DEFAULT NULL COMMENT '签到图片',		`off_time` datetime DEFAULT NULL COMMENT		'签退时间',		`off_gate` int(11) DEFAULT NULL COMMENT '签退闸机ID',		`off_photo`		varchar(50) DEFAULT NULL COMMENT '签退照片',		`belong_id` int(11) DEFAULT		NULL COMMENT '所属用户ID',		`overtime_hours` double(3,1) NOT NULL DEFAULT 0,        `valid_attend` int(1) NOT NULL DEFAULT 0,		PRIMARY KEY (`id`)		) ENGINE=InnoDB		AUTO_INCREMENT=65 DEFAULT CHARSET=utf8;	</update>    <sql id="baseSql">		id , staff_id , staff_name,dept_id, attend_date, status,		attend_hour,		on_time,		on_gate, on_photo, off_time, off_gate, off_photo,		belong_id,overtime_hours,valid_attend	</sql>    <select id="getAttendSumByStaffId" resultType="com.wujie.springbootlayui.bus.entity.AttendSum">		<![CDATA[		select		a.staff_id  staffId,		a.staff_name staffName,		a.dept_id deptId,		SUM(a.attend_hour) workSum ,		SUM(a.overtime_hours) overtimeSum ,		SUM( if(a.on_status = 2,1,0 )) lateSum ,		SUM( if(a.off_status = 3,1,0 )) earlySum,		SUM( if(a.valid_attend = 1,1,0 )) actualDay		from ${vo.tName} a		where a.staff_id = #{vo.staffId}		AND a.attend_date >=  #{vo.startTime}		AND a.attend_date <=  #{vo.endTime}		order by a.attend_date desc		]]>	</select>    <select id="loadAllAttendByStaffId" resultMap="attendMap">        select        <include refid="baseSql"></include>        from ${tName}        where staff_id = #{staffId}    </select>    <insert id="insertAttend" parameterType="com.wujie.springbootlayui.bus.entity.Attend"><![CDATA[                    insert into ${tName}(                          staff_id,                          staff_name,                          dept_id,                          attend_date,                          on_status,                          off_Status,                          attend_hour,                          on_time,                          on_gate,                          on_photo,                          off_time,                          off_gate,                          off_photo,                          belong_id,                          overtime_hours,                          valid_attend                    )VALUES(                         #{staffId},                         #{staffName},                          #{deptId},                          #{attendDate},                          #{onStatus} ,                          #{offStatus} ,                          #{attendHour},                          #{onTime},                          #{onGate},                          #{onPhoto},                          #{offTime},                          #{offGate},                          #{offPhoto},                          #{belongId},                          #{overtimeHours},                          #{validAttend}                    )        ]]>	</insert>    <delete id="deleteAttend" parameterType="com.wujie.springbootlayui.bus.entity.Attend">        <![CDATA[                delete from ${tName} where id = #{id}        ]]>	</delete>    <delete id="deleteTable" parameterType="com.wujie.springbootlayui.bus.entity.Attend">        <![CDATA[                DROP TABLE IF EXISTS ${tName}        ]]>	</delete></mapper>