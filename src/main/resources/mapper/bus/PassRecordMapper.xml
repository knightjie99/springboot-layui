<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.wujie.springbootlayui.bus.mapper.PassRecordMapper">    <update id="createPassRecordTable" parameterType="string">		CREATE TABLE ${tName} (		   id             int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '通行记录表',		   pass_time      datetime DEFAULT NULL COMMENT '通过时间',		   name           varchar(20) DEFAULT NULL COMMENT '姓名',		   sex            int(2) DEFAULT NULL COMMENT '性别(1-男 2-女)',		   id_num         varchar(20) DEFAULT NULL COMMENT '身份证号',		   phone          varchar(20) DEFAULT NULL COMMENT '手机号',		   card_num       varchar(20) DEFAULT NULL COMMENT '卡号',		   face_photo     varchar(255) DEFAULT NULL COMMENT '人脸信息访问地址',		   gate_id        int(11) DEFAULT NULL COMMENT '闸机ID',		   pass_way       int(2) DEFAULT NULL COMMENT '通行方式(1-人脸识别 2-刷卡)',		   identity_type  int(2) DEFAULT NULL COMMENT '身份(1-员工 2-访客)',		   temperature    varchar(10) DEFAULT NULL COMMENT '温度',		   pass_direction int(2) DEFAULT NULL COMMENT '通行方向(1-进入 2-离开)',		   belong_id      int(11) DEFAULT NULL COMMENT '所属用户',		   PRIMARY KEY (`id`)		) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;	</update>    <insert id="insertPassRecord" parameterType="com.wujie.springbootlayui.bus.entity.PassRecord">	    <![CDATA[                    insert into ${tName}(                          pass_time,                          name,                          sex,                          id_num,                          phone,                          card_num,                          face_photo,                          gate_id,                          pass_way,                          identity_type,                          temperature,                          pass_direction,                          belong_id                    )VALUES(                          #{passTime},                          #{name},                          #{sex},                          #{idNum},                          #{phone},                          #{cardNum},                          #{facePhoto},                          #{gateId},                          #{passWay},                          #{identityType},                          #{temperature},                          #{passDirection},                          #{belongId}                    )        ]]>	</insert>    <delete id="deleteTable" parameterType="com.wujie.springbootlayui.bus.entity.PassRecord">        <![CDATA[                        DROP TABLE IF EXISTS ${tName}        ]]>    </delete>    <select id="selectByHour" resultType="com.wujie.springbootlayui.bus.entity.HourPass">        select DATE_FORMAT(pass_time,'%H') hours,count(id) count from ${tName}        <where>            <if test="timeRange != null">                and date(pass_time) >= DATE_SUB(CURDATE(), INTERVAL #{timeRange} DAY)            </if>            <if test="gateId != null">                and gate_id=#{gateId}            </if>        </where>        group by hours ;    </select>    <select id="recordsRank" resultType="com.wujie.springbootlayui.bus.entity.recordRank">        select g.gate_name ,SUM( if(r.id > 0,1,0 ))        records from ${tName} r,bus_gate g        <where>            <if test="begin!=null">                and	r.pass_time>#{begin}            </if>            <if test="end!=null">                and	#{end}>r.pass_time            </if>            and r.gate_id=g.id        </where>        GROUP BY r.gate_id ORDER BY records desc    </select></mapper>